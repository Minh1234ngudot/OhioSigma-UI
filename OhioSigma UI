--!strict
local OhioSigma = {}
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

local tabContents = {}
local tabCount = 0
local tabBar: Frame = nil

function OhioSigma:CreateWindow(config: { Name: string })
	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = config.Name or "OhioSigma_Hub"
	screenGui.ResetOnSpawn = false
	screenGui.Parent = player:WaitForChild("PlayerGui")

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 450, 0, 300)
	frame.Position = UDim2.new(0.5, -225, 0.5, -150)
	frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	frame.BorderSizePixel = 0
	frame.Active = true
	frame.Draggable = true
	frame.Parent = screenGui

	Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)
	Instance.new("UIStroke", frame) do local s=frame.UIStroke s.Thickness=2 s.Color=Color3.fromRGB(0,170,255) s.Transparency=0.2 end
	Instance.new("UIGradient", frame).Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 35)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(50, 50, 50))
	}

	local title = Instance.new("TextLabel", frame)
	title.Size = UDim2.new(1, 0, 0, 40)
	title.BackgroundTransparency = 1
	title.Text = config.Name or "OhioSigma Hub"
	title.TextColor3 = Color3.fromRGB(0, 170, 255)
	title.Font = Enum.Font.GothamSemibold
	title.TextSize = 28
	title.Position = UDim2.new(0, 0, 0, 0)
	title.ZIndex = 2

	local tabBarContainer = Instance.new("Frame", frame)
	tabBarContainer.Size = UDim2.new(1, 0, 0, 30)
	tabBarContainer.Position = UDim2.new(0, 0, 0, 40)
	tabBarContainer.BackgroundTransparency = 1
	tabBarContainer.ZIndex = 2

	local leftArrow = Instance.new("TextButton", tabBarContainer)
	leftArrow.Size = UDim2.new(0, 25, 1, 0)
	leftArrow.Position = UDim2.new(0, 0, 0, 0)
	leftArrow.Text = "<"
	leftArrow.Font = Enum.Font.GothamBold
	leftArrow.TextSize = 20
	leftArrow.TextColor3 = Color3.new(1, 1, 1)
	leftArrow.BackgroundTransparency = 1

	tabBar = Instance.new("ScrollingFrame", tabBarContainer)
	tabBar.Name = "TabScrollArea"
	tabBar.Size = UDim2.new(1, -50, 1, 0)
	tabBar.Position = UDim2.new(0, 25, 0, 0)
	tabBar.BackgroundTransparency = 1
	tabBar.BorderSizePixel = 0
	tabBar.ScrollBarThickness = 0
	tabBar.CanvasSize = UDim2.new(0, 0, 0, 0)
	tabBar.ScrollingDirection = Enum.ScrollingDirection.X

	local tabLayout = Instance.new("UIListLayout", tabBar)
	tabLayout.FillDirection = Enum.FillDirection.Horizontal
	tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
	tabLayout.Padding = UDim.new(0, 5)

	tabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		tabBar.CanvasSize = UDim2.new(0, tabLayout.AbsoluteContentSize.X, 0, 0)
	end)

	local rightArrow = Instance.new("TextButton", tabBarContainer)
	rightArrow.Size = UDim2.new(0, 25, 1, 0)
	rightArrow.Position = UDim2.new(1, -25, 0, 0)
	rightArrow.Text = ">"
	rightArrow.Font = Enum.Font.GothamBold
	rightArrow.TextSize = 20
	rightArrow.TextColor3 = Color3.new(1, 1, 1)
	rightArrow.BackgroundTransparency = 1

	leftArrow.MouseButton1Click:Connect(function()
		tabBar.CanvasPosition = Vector2.new(math.max(0, tabBar.CanvasPosition.X - 80), 0)
	end)
	rightArrow.MouseButton1Click:Connect(function()
		tabBar.CanvasPosition = Vector2.new(tabBar.CanvasPosition.X + 80, 0)
	end)

	local separator = Instance.new("Frame", frame)
	separator.Size = UDim2.new(1, 0, 0, 2)
	separator.Position = UDim2.new(0, 0, 0, 75)
	separator.BackgroundColor3 = Color3.new(1, 1, 1)
	separator.BorderSizePixel = 0
	separator.ZIndex = 2

	self._mainFrame = frame
	return self
end

function OhioSigma:CreateTab(name: string): ScrollingFrame
	assert(self._mainFrame, "You must call CreateWindow first")
	tabCount += 1
	local tabOrder = tabCount

	local tabButton = Instance.new("TextButton", tabBar)
	tabButton.Size = UDim2.new(0, 80, 0, 28)
	tabButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
	tabButton.BorderSizePixel = 0
	tabButton.TextTransparency = 1
	tabButton.AutoButtonColor = true
	tabButton.Active = true
	tabButton.ZIndex = 3
	Instance.new("UICorner", tabButton).CornerRadius = UDim.new(0, 10)

	local gradient = Instance.new("UIGradient", tabButton)
	gradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 200, 255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 120, 255))
	}
	gradient.Rotation = 90

	local label = Instance.new("TextLabel", tabButton)
	label.Size = UDim2.new(1, 0, 1, 0)
	label.Position = UDim2.new(0, 0, 0, 1)
	label.BackgroundTransparency = 1
	label.Text = name
	label.Font = Enum.Font.GothamBlack
	label.TextSize = 16
	label.TextColor3 = Color3.new(1, 1, 1)
	label.TextXAlignment = Enum.TextXAlignment.Center
	label.ZIndex = 4

	local labelGradient = Instance.new("UIGradient", label)
	labelGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
	}

	task.spawn(function()
		while label and labelGradient and labelGradient.Parent do
			for i = 0, 360, 2 do
				labelGradient.Rotation = i
				task.wait(0.02)
			end
		end
	end)

	local content = Instance.new("ScrollingFrame", self._mainFrame)
	content.Size = UDim2.new(1, -8, 1, -90)
	content.Position = UDim2.new(0, 4, 0, 81)
	content.BackgroundTransparency = 1
	content.BorderSizePixel = 0
	content.ScrollBarThickness = 0
	content.AutomaticCanvasSize = Enum.AutomaticSize.Y
	content.CanvasSize = UDim2.new(0, 0, 0, 0)
	content.Visible = tabOrder == 1
	content.ZIndex = 1

	local padding = Instance.new("UIPadding", content)
	padding.PaddingLeft = UDim.new(0, 7)

	local layout = Instance.new("UIGridLayout", content)
	layout.CellSize = UDim2.new(0, 200, 0, 50)
	layout.CellPadding = UDim2.new(0, 29, 0, 10)
	layout.SortOrder = Enum.SortOrder.LayoutOrder

	tabContents[name] = {
		content = content,
		button = tabButton
	}

	if tabOrder == 1 then
		tabButton.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
	end

	tabButton.MouseButton1Click:Connect(function()
		for _, data in pairs(tabContents) do
			data.content.Visible = false
			data.button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
		end
		content.Visible = true
		tabButton.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
	end)

	return content
end

function OhioSigma:CreateButton(parent: Instance, labelText: string, onClick: () -> ())
	local btn = Instance.new("TextButton", parent)
	btn.Size = UDim2.new(0, 200, 0, 50)
	btn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)

local bgGradient = Instance.new("UIGradient", btn)
bgGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 200, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 120, 255))
}
bgGradient.Rotation = 90

	local label = Instance.new("TextLabel", btn)
	label.Size = UDim2.new(1, 0, 1, 0)
	label.BackgroundTransparency = 1
	label.Text = labelText
	label.Font = Enum.Font.GothamBlack
	label.TextSize = 16
	label.TextColor3 = Color3.new(1, 1, 1)
	label.TextXAlignment = Enum.TextXAlignment.Center
        label.TextYAlignment = Enum.TextYAlignment.Center -- thêm dòng này

	local labelGradient = Instance.new("UIGradient", label)
	labelGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
	}

	task.spawn(function()
		while label and labelGradient and labelGradient.Parent do
			for i = 0, 360, 2 do
				labelGradient.Rotation = i
				task.wait(0.02)
			end
		end
	end)

	btn.MouseButton1Click:Connect(onClick)
end

return OhioSigma
